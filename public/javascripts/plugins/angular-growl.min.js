/**
 * angular-growl-v2 - v0.7.3 - 2015-02-22
 * http://janstevens.github.io/angular-growl-2
 * Copyright (c) 2015 Marco Rinck,Jan Stevens; Licensed MIT
 */
angular.module("angular-growl",[]),angular.module("angular-growl").directive("growl",[function(){"use strict"
return{restrict:"A",templateUrl:"templates/growl/growl.html",replace:!1,scope:{reference:"@",inline:"=",limitMessages:"="},controller:["$scope","$timeout","growl","growlMessages",function(e,s,t,n){e.referenceId=e.reference||0,n.initDirective(e.referenceId,e.limitMessages),e.growlMessages=n,e.inlineMessage=angular.isDefined(e.inline)?e.inline:t.inlineMessages(),e.$watch("limitMessages",function(s){var t=n.directives[e.referenceId]
angular.isUndefined(s)||angular.isUndefined(t)||(t.limitMessages=s)}),e.stopTimeoutClose=function(e){e.clickToClose||(angular.forEach(e.promises,function(e){s.cancel(e)}),e.close?n.deleteMessage(e):e.close=!0)},e.alertClasses=function(e){return{"alert-success":"success"===e.severity,"alert-error":"error"===e.severity,"alert-danger":"error"===e.severity,"alert-info":"info"===e.severity,"alert-warning":"warning"===e.severity,icon:e.disableIcons===!1,"alert-dismissable":!e.disableCloseButton}},e.showCountDown=function(e){return!e.disableCountDown&&e.ttl>0},e.wrapperClasses=function(){var s={}
return s["growl-fixed"]=!e.inlineMessage,s[t.position()]=!0,s},e.computeTitle=function(e){var s={success:"Success",error:"Error",info:"Information",warn:"Warning"}
return s[e.severity]}}]}}]),angular.module("angular-growl").run(["$templateCache",function(e){"use strict"
void 0===e.get("templates/growl/growl.html")&&e.put("templates/growl/growl.html",'<div class="growl-container" ng-class="wrapperClasses()"><div class="growl-item alert" ng-repeat="message in growlMessages.directives[referenceId].messages" ng-class="alertClasses(message)" ng-click="stopTimeoutClose(message)"><button type="button" class="close" data-dismiss="alert" aria-hidden="true" ng-click="growlMessages.deleteMessage(message)" ng-show="!message.disableCloseButton">&times;</button><button type="button" class="close" aria-hidden="true" ng-show="showCountDown(message)">{{message.countdown}}</button><h4 class="growl-title" ng-show="message.title" ng-bind="message.title"></h4><div class="growl-message" ng-bind-html="message.text"></div></div></div>')}]),angular.module("angular-growl").provider("growl",function(){"use strict"
var e={success:null,error:null,warning:null,info:null},s="messages",t="text",n="title",i="severity",r=!0,o="variables",a=0,l=!1,c="top-right",u=!1,g=!1,d=!1,f=!1,v=!0
this.globalTimeToLive=function(s){if("object"==typeof s)for(var t in s)s.hasOwnProperty(t)&&(e[t]=s[t])
else for(var n in e)e.hasOwnProperty(n)&&(e[n]=s)},this.globalTranslateMessages=function(e){v=e},this.globalDisableCloseButton=function(e){u=e},this.globalDisableIcons=function(e){g=e},this.globalReversedOrder=function(e){d=e},this.globalDisableCountDown=function(e){f=e},this.messageVariableKey=function(e){o=e},this.globalInlineMessages=function(e){l=e},this.globalPosition=function(e){c=e},this.messagesKey=function(e){s=e},this.messageTextKey=function(e){t=e},this.messageTitleKey=function(e){n=e},this.messageSeverityKey=function(e){i=e},this.onlyUniqueMessages=function(e){r=e},this.serverMessagesInterceptor=["$q","growl",function(e,t){function n(e){void 0!==e&&e.data[s]&&e.data[s].length>0&&t.addServerMessages(e.data[s])}return{response:function(e){return n(e),e},responseError:function(s){return n(s),e.reject(s)}}}],this.$get=["$rootScope","$interpolate","$sce","$filter","$timeout","growlMessages",function(s,h,m,w,p,b){function M(e){if(B&&e.translateMessage)e.text=B(e.text,e.variables),e.title=B(e.title)
else{var t=h(e.text)
e.text=t(e.variables)}var n=b.addMessage(e)
return s.$broadcast("growlMessage",e),p(function(){},0),n}function y(s,t,n){var i,r=t||{}
return i={text:s,title:r.title,severity:n,ttl:r.ttl||e[n],variables:r.variables||{},disableCloseButton:void 0===r.disableCloseButton?u:r.disableCloseButton,disableIcons:void 0===r.disableIcons?g:r.disableIcons,disableCountDown:void 0===r.disableCountDown?f:r.disableCountDown,position:r.position||c,referenceId:r.referenceId||a,translateMessage:void 0===r.translateMessage?v:r.translateMessage,destroy:function(){b.deleteMessage(i)},setText:function(e){i.text=m.trustAsHtml(String(e))},onclose:r.onclose,onopen:r.onopen},M(i)}function C(e,s){return y(e,s,"warning")}function I(e,s){return y(e,s,"error")}function x(e,s){return y(e,s,"info")}function D(e,s){return y(e,s,"success")}function $(e,s,t){t=(t||"error").toLowerCase(),y(e,s,t)}function T(e){if(e&&e.length){var s,r,a,l
for(l=e.length,s=0;l>s;s++)if(r=e[s],r[t]){a=(r[i]||"error").toLowerCase()
var c={}
c.variables=r[o]||{},c.title=r[n],y(r[t],c,a)}}}function O(){return r}function S(){return d}function U(){return l}function A(){return c}var B
b.onlyUnique=r,b.reverseOrder=d
try{B=w("translate")}catch(q){}return{warning:C,error:I,info:x,success:D,general:$,addServerMessages:T,onlyUnique:O,reverseOrder:S,inlineMessages:U,position:A}}]}),angular.module("angular-growl").service("growlMessages",["$sce","$timeout",function(e,s){"use strict"
function t(e){var s
return s=n[e]?n[e]:n[e]={messages:[]}}this.directives={}
var n={}
this.initDirective=function(e,s){return n[e]?(this.directives[e]=n[e],this.directives[e].limitMessages=s):this.directives[e]={messages:[],limitMessages:s},this.directives[e]},this.getAllMessages=function(e){e=e||0
var s
return s=this.directives[e]?this.directives[e].messages:[]},this.destroyAllMessages=function(e){for(var s=this.getAllMessages(e),t=s.length-1;t>=0;t--)s[t].destroy()
this.directives[e]&&(this.directives[e].messages=[])},this.addMessage=function(n){var i,r,o,a
if(i=this.directives[n.referenceId]?this.directives[n.referenceId]:t(n.referenceId),r=i.messages,!this.onlyUnique||(angular.forEach(r,function(s){a=e.getTrustedHtml(s.text),n.text===a&&n.severity===s.severity&&n.title===s.title&&(o=!0)}),!o)){if(n.text=e.trustAsHtml(String(n.text)),n.ttl&&-1!==n.ttl&&(n.countdown=n.ttl/1e3,n.promises=[],n.close=!1,n.countdownFunction=function(){n.countdown>1?(n.countdown--,n.promises.push(s(n.countdownFunction,1e3))):n.countdown--}),angular.isDefined(i.limitMessages)){var l=r.length-(i.limitMessages-1)
l>0&&r.splice(i.limitMessages-1,l)}return this.reverseOrder?r.unshift(n):r.push(n),"function"==typeof n.onopen&&n.onopen(),n.ttl&&-1!==n.ttl&&(n.promises.push(s(angular.bind(this,function(){this.deleteMessage(n)}),n.ttl)),n.promises.push(s(n.countdownFunction,1e3))),n}},this.deleteMessage=function(e){var s=this.directives[e.referenceId].messages,t=s.indexOf(e)
t>-1&&(s[t].close=!0,s.splice(t,1)),"function"==typeof e.onclose&&e.onclose()}}])
